{% extends 'core/base.html' %}


{% block content %}
    <h1 class="title">View Shared Files</h1>

    <h2 class="subtitle">{{ file.document.title }}</h2>

    <small>Date added: {{ file.created_at }}</small>
    <p><strong>Content: </strong> <br>{{ file.comment }}</p>
    <p><strong>Receiver: </strong> <br> {{ file.receiver }}</p>
    <p><strong>Type:</strong> {{file.category.name}}</p>

    <hr>
    <h2 class="subtitle">Conversations</h2>
    
    {% for message in file.conversationmessages.all %}
    <div class="notification">
        <b>{{ message.created_by.username }} - {{ message.created_at|timesince }} ago</b><br>

        {{ message.content }}
    </div>
    {% empty %}
        <p>No messages yet...</p>

        <hr>
    {% endfor %}
    <form action="" method="POST">
        {% csrf_token %}

        <div class="field">
            <div class="control">
                <textarea name="content" id="id_content"class="textarea" placeholder="Your Message"></textarea>
            </div>
        </div>

        <div class="field">
            <div class="control">
                <button class="button is-success">Sen</button>
                <a href="{% url 'forward_file' file.id %}" class="button is-success">Forward</a>

            </div>
        </div>
    </form>
{% endblock content %}